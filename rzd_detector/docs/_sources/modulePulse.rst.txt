Модуль ``pulse.py``
===================

.. contents:: Содержание
   :depth: 3
   :local:

Этот модуль предназначен для обработки лиц и получения частоты ударов в минуту сердца с использование библиотеки ``pyVHR``. 

Обзор
-----

Модуль состоит из трех основных функций:

- ``get_bpm_with_pbv``: Функция для извлечения пульса объёма крови (BVP) из видеофайла и оценки количества ударов в минуту (BPM).
- ``process_pulse_info``: Функция для выполнения оценки полученных значений пульса.
- ``evaluate_pulse_results``: Функция выполнения оценки по шкале баллов на основе полученных данных о значениях и изменениях пульса.

Функция ``get_bpm_with_pbv``
----------------------------

**Аргументы:**

- ``videoFileName (str)``: Путь к видеофайлу.
- ``cuda (bool, опционально)``: Флаг для использования GPU для обработки. По умолчанию ``True``.
- ``winsize (int, опционально)``: Размер окна для обработки сигнала. По умолчанию ``4``.

**Возвращает:**

- ``tuple``: Кортеж, содержащий извлечённый BVP, временные метки и BPM.

**Исключения:**

- ``AssertionError``: Видеофайл не существует.

Функция ``process_pulse_info``
------------------------------

**Аргументы:**

- ``bpm (list)``: Список исходных значений.
- ``base_offset (int, опционально)``: Смещение для значений пульса. По умолчанию ``10``
- ``slow_plot (bool, опционально)``: Показывать график или нет. По умолчанию ``True``.
- ``plot_path (str, опционально)``: Путь для сохранения графика. По умолчанию ``None``.

**Возвращает:**

- ``tuple``: Кортеж, содержащий результаты анализа пульса в виде медианы, трендов, медианы верхушек и т.п.

**Исключения:**

- ``ValueError``: Список BPM пуст или base_offset меньше минимального значения пульса.
- ``AssertionError``: Значение ``base_offset`` не входит в диапазон от -40 до 40.

Функция ``evaluate_pulse_results``
----------------------------------

**Аргументы:**

- ``base_mean (float)``: Общая медиана пульса.
- ``trend (int)``: Трэнд.
- ``high_med (float)``: Медиана наивысших значений (медиана ``tops_values``).
- ``midpoints (list)``: Верхушки графика.
- ``tops_values (list)``: Самые большие значения.

**Возвращает:**

- ``points (int)``: Оценка пульса по всем входящим критериям.

